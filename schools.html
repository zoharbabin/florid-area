<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced South Florida School & Community Decision Platform - Extended Analysis</title>
    <!-- Leaflet CSS and JS from approved cdnjs.cloudflare.com -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f0f2f5;
            color: #1a1a1a;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #3498db;
            margin: 10px 0;
        }
        
        .metric-label {
            color: #7f8c8d;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .control-panel {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        .control-panel h2 {
            margin-bottom: 20px;
            color: #2c3e50;
        }
        
        .weight-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .weight-control {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }
        
        .weight-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 500;
            color: #34495e;
        }
        
        .weight-value {
            color: #3498db;
            font-weight: 600;
        }
        
        .weight-slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            appearance: none;
            background: #e0e0e0;
            border-radius: 5px;
            outline: none;
            cursor: pointer;
        }
        
        .weight-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #3498db;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .weight-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #3498db;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .ranking-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        .ranking-grid {
            display: grid;
            gap: 20px;
            margin-top: 20px;
        }
        
        .ranking-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }
        
        .ranking-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-color: #3498db;
        }
        
        .ranking-card.selected {
            border-color: #3498db;
            background: #e3f2fd;
        }
        
        .rank-number {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .ranking-content {
            margin-left: 50px;
        }
        
        .ranking-title {
            font-size: 1.4em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .ranking-subtitle {
            color: #7f8c8d;
            margin-bottom: 15px;
        }
        
        .score-bar {
            background: #e0e0e0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 15px;
            position: relative;
        }
        
        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db 0%, #2ecc71 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-weight: 600;
        }
        
        .score-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .score-item {
            background: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e0e0e0;
        }
        
        .score-item-label {
            font-size: 0.85em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        
        .score-item-value {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: white;
            border-radius: 15px;
            padding: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s;
            font-weight: 500;
            margin: 5px;
        }
        
        .tab:hover {
            background-color: #f8f9fa;
        }
        
        .tab.active {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            color: white;
        }
        
        .content-section {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .content-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        #mapContainer {
            height: 600px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            position: relative;
        }
        
        .map-controls {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }
        
        .map-filters {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .map-filter-btn {
            padding: 10px 20px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .map-filter-btn:hover {
            border-color: #3498db;
            transform: translateY(-2px);
        }
        
        .map-filter-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        .comparison-table {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            overflow-x: auto;
        }
        
        .comparison-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .comparison-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
            position: sticky;
            top: 0;
        }
        
        .comparison-table tr:hover {
            background-color: #f8f9fa;
        }
        
        .comparison-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .detail-panel {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }
        
        .detail-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }
        
        .detail-section h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .detail-list {
            list-style: none;
        }
        
        .detail-list li {
            padding: 10px 0;
            color: #555;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .detail-list li:last-child {
            border-bottom: none;
        }
        
        .detail-list strong {
            color: #2c3e50;
        }
        
        .rating {
            display: flex;
            gap: 2px;
        }
        
        .star {
            width: 16px;
            height: 16px;
            background-color: #ffd700;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        }
        
        .star.empty {
            background-color: #ddd;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 500;
            margin-right: 5px;
        }
        
        .badge-secular {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        
        .badge-luxury {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #333;
        }
        
        .badge-safety {
            background-color: #e3f2fd;
            color: #1976d2;
        }
        
        .badge-international {
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%);
            color: white;
        }
        
        .leaflet-popup-content {
            min-width: 280px;
            padding: 15px;
        }
        
        .popup-title {
            font-weight: 600;
            font-size: 1.2em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .popup-details {
            font-size: 0.95em;
            color: #555;
            line-height: 1.5;
        }
        
        .popup-details div {
            margin: 8px 0;
        }
        
        .popup-highlight {
            background-color: #e3f2fd;
            padding: 3px 6px;
            border-radius: 3px;
            font-weight: 500;
        }
        
        .legend {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: absolute;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
        }
        
        .legend-icon {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border-radius: 50%;
        }
        
        .decision-helper {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .decision-helper h3 {
            color: #2c3e50;
            margin-bottom: 20px;
        }
        
        .helper-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .helper-btn {
            padding: 12px 25px;
            background: white;
            border: 2px solid #3498db;
            color: #3498db;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .helper-btn:hover {
            background: #3498db;
            color: white;
            transform: translateY(-2px);
        }
        
        .qualitative-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        .qualitative-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .qualitative-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }
        
        .qualitative-card h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .qualitative-card p {
            color: #555;
            font-size: 0.95em;
            line-height: 1.6;
        }
        
        .warning-box {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            color: #856404;
        }
        
        .success-box {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            color: #155724;
        }
        
        .info-box {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            color: #0c5460;
        }
        
        .rental-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        .rental-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .rental-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }
        
        .rental-card h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .rental-prices {
            display: grid;
            gap: 10px;
        }
        
        .rental-price-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .rental-price-item:last-child {
            border-bottom: none;
        }
        
        .living-considerations-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        .traffic-card {
            background: #fff5e6;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #ff9800;
            margin-bottom: 20px;
        }
        
        .cost-living-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .cost-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .cost-item-label {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        
        .cost-item-value {
            font-size: 1.2em;
            font-weight: 600;
            color: #2c3e50;
        }
        
        @media (max-width: 768px) {
            .weight-controls {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                width: 100%;
                text-align: center;
            }
            
            .map-filters {
                flex-direction: column;
            }
            
            .map-filter-btn {
                width: 100%;
            }
            
            #mapContainer {
                height: 400px;
            }
            
            .detail-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Your Enhanced South Florida School & Community Decision Platform</h1>
            <p class="subtitle">Extended Analysis Including Aventura, North Miami Beach & Complete Living Considerations</p>
        </header>
        
        <div class="dashboard">
            <div class="metric-card">
                <div class="metric-label">Days Until Move</div>
                <div class="metric-value" id="daysLeft">58</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Schools Analyzed</div>
                <div class="metric-value">31</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Communities Compared</div>
                <div class="metric-value">7</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Israeli Families in Region</div>
                <div class="metric-value">25,000+</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Decision Factors</div>
                <div class="metric-value">12</div>
            </div>
        </div>
        
        <div class="decision-helper">
            <h3>Quick Start: What matters most to your family?</h3>
            <div class="helper-buttons">
                <button class="helper-btn" onclick="setPreset('academic')">🎓 Academic Excellence</button>
                <button class="helper-btn" onclick="setPreset('community')">🏡 Israeli Community</button>
                <button class="helper-btn" onclick="setPreset('swimming')">🏊 Swimming Focus</button>
                <button class="helper-btn" onclick="setPreset('gamedesign')">🎮 Game Design Path</button>
                <button class="helper-btn" onclick="setPreset('international')">🌍 International Vibe</button>
                <button class="helper-btn" onclick="setPreset('balanced')">⚖️ Balanced Approach</button>
            </div>
        </div>
        
        <div class="control-panel">
            <h2>Customize Your Priorities</h2>
            <p style="margin-bottom: 20px; color: #7f8c8d;">Move the sliders to adjust how important each factor is for your family. The system will automatically recalculate the best locations based on your unique priorities.</p>
            
            <div class="weight-controls">
                <div class="weight-control">
                    <div class="weight-label">
                        <span>Academic Excellence</span>
                        <span class="weight-value" id="academic-value">50%</span>
                    </div>
                    <input type="range" class="weight-slider" id="academic-weight" min="0" max="100" value="50" oninput="updateWeights()">
                </div>
                
                <div class="weight-control">
                    <div class="weight-label">
                        <span>STEM Programs</span>
                        <span class="weight-value" id="stem-value">50%</span>
                    </div>
                    <input type="range" class="weight-slider" id="stem-weight" min="0" max="100" value="50" oninput="updateWeights()">
                </div>
                
                <div class="weight-control">
                    <div class="weight-label">
                        <span>Arts Programs</span>
                        <span class="weight-value" id="arts-value">50%</span>
                    </div>
                    <input type="range" class="weight-slider" id="arts-weight" min="0" max="100" value="50" oninput="updateWeights()">
                </div>
                
                <div class="weight-control">
                    <div class="weight-label">
                        <span>Game Design/Tech</span>
                        <span class="weight-value" id="gamedesign-value">50%</span>
                    </div>
                    <input type="range" class="weight-slider" id="gamedesign-weight" min="0" max="100" value="50" oninput="updateWeights()">
                </div>
                
                <div class="weight-control">
                    <div class="weight-label">
                        <span>Israeli Community</span>
                        <span class="weight-value" id="community-value">50%</span>
                    </div>
                    <input type="range" class="weight-slider" id="community-weight" min="0" max="100" value="50" oninput="updateWeights()">
                </div>
                
                <div class="weight-control">
                    <div class="weight-label">
                        <span>Swimming Programs</span>
                        <span class="weight-value" id="swimming-value">50%</span>
                    </div>
                    <input type="range" class="weight-slider" id="swimming-weight" min="0" max="100" value="50" oninput="updateWeights()">
                </div>
                
                <div class="weight-control">
                    <div class="weight-label">
                        <span>Safety</span>
                        <span class="weight-value" id="safety-value">50%</span>
                    </div>
                    <input type="range" class="weight-slider" id="safety-weight" min="0" max="100" value="50" oninput="updateWeights()">
                </div>
                
                <div class="weight-control">
                    <div class="weight-label">
                        <span>Luxury/Property Value</span>
                        <span class="weight-value" id="luxury-value">50%</span>
                    </div>
                    <input type="range" class="weight-slider" id="luxury-weight" min="0" max="100" value="50" oninput="updateWeights()">
                </div>
                
                <div class="weight-control">
                    <div class="weight-label">
                        <span>Cost Efficiency</span>
                        <span class="weight-value" id="cost-value">50%</span>
                    </div>
                    <input type="range" class="weight-slider" id="cost-weight" min="0" max="100" value="50" oninput="updateWeights()">
                </div>
                
                <div class="weight-control">
                    <div class="weight-label">
                        <span>International Community</span>
                        <span class="weight-value" id="international-value">50%</span>
                    </div>
                    <input type="range" class="weight-slider" id="international-weight" min="0" max="100" value="50" oninput="updateWeights()">
                </div>
                
                <div class="weight-control">
                    <div class="weight-label">
                        <span>Beach Proximity</span>
                        <span class="weight-value" id="beach-value">50%</span>
                    </div>
                    <input type="range" class="weight-slider" id="beach-weight" min="0" max="100" value="50" oninput="updateWeights()">
                </div>
                
                <div class="weight-control">
                    <div class="weight-label">
                        <span>Traffic/Commute</span>
                        <span class="weight-value" id="traffic-value">50%</span>
                    </div>
                    <input type="range" class="weight-slider" id="traffic-weight" min="0" max="100" value="50" oninput="updateWeights()">
                </div>
            </div>
        </div>
        
        <div class="tabs">
            <div class="tab active" onclick="showSection('rankings')">📊 Personalized Rankings</div>
            <div class="tab" onclick="showSection('rentals')">🏠 Rental Market Analysis</div>
            <div class="tab" onclick="showSection('living')">💰 Cost of Living & Traffic</div>
            <div class="tab" onclick="showSection('map')">🗺️ Interactive Map</div>
            <div class="tab" onclick="showSection('comparison')">⚖️ Detailed Comparison</div>
            <div class="tab" onclick="showSection('qualitative')">💭 Community Insights</div>
            <div class="tab" onclick="showSection('details')">📋 Complete Data</div>
        </div>
        
        <div id="rankings" class="content-section active">
            <div class="ranking-section">
                <h2>Your Personalized Location Rankings - Including NEW Areas</h2>
                <p style="color: #7f8c8d; margin-bottom: 20px;">Based on your priorities, here are all locations including the newly discovered Aventura and North Miami Beach options. These rankings update in real-time as you adjust your preferences.</p>
                
                <div class="info-box" style="margin-bottom: 20px;">
                    <strong>🆕 New Discovery:</strong> Aventura and North Miami Beach offer unique advantages we initially overlooked. Aventura has an international flair similar to Manhattan with significant Israeli populations, while North Miami Beach hosts the prestigious Scheck Hillel Community School. Both are in Miami-Dade County, which has different school calendars and policies than Broward County.
                </div>
                
                <div class="ranking-grid" id="rankingGrid">
                    <!-- Rankings will be dynamically generated -->
                </div>
            </div>
        </div>
        
        <div id="rentals" class="content-section">
            <div class="rental-section">
                <h2>Rental Market Analysis - All Areas</h2>
                <p style="color: #7f8c8d; margin-bottom: 20px;">Complete rental pricing data for all areas, updated for 2025. These prices reflect the current market conditions and seasonal variations.</p>
                
                <div class="rental-grid">
                    <div class="rental-card">
                        <h4>🏡 Weston</h4>
                        <div class="rental-prices">
                            <div class="rental-price-item">
                                <span>2BR/2BA Apartment</span>
                                <span><strong>$2,400-$3,200/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>3BR/2BA House</span>
                                <span><strong>$3,500-$4,800/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>4BR/3BA House</span>
                                <span><strong>$4,500-$6,500/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>Luxury 4BR+</span>
                                <span><strong>$6,000-$12,000/mo</strong></span>
                            </div>
                        </div>
                        <p style="margin-top: 15px; color: #666; font-size: 0.9em;">
                            <strong>Availability:</strong> Limited rental inventory, most homes are owner-occupied<br>
                            <strong>Deposits:</strong> First, last, security (3 months upfront typical)<br>
                            <strong>Pet Policy:</strong> Many HOAs restrict pets, especially large dogs
                        </p>
                    </div>
                    
                    <div class="rental-card">
                        <h4>🏊 Cooper City</h4>
                        <div class="rental-prices">
                            <div class="rental-price-item">
                                <span>2BR/2BA Apartment</span>
                                <span><strong>$2,000-$2,600/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>3BR/2BA House</span>
                                <span><strong>$2,800-$3,800/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>4BR/3BA House</span>
                                <span><strong>$3,500-$5,000/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>Townhomes</span>
                                <span><strong>$2,400-$3,200/mo</strong></span>
                            </div>
                        </div>
                        <p style="margin-top: 15px; color: #666; font-size: 0.9em;">
                            <strong>Availability:</strong> Better rental selection than Weston<br>
                            <strong>Value:</strong> Best price-to-quality ratio in area<br>
                            <strong>Flexibility:</strong> More landlords open to short-term leases
                        </p>
                    </div>
                    
                    <div class="rental-card">
                        <h4>🏡 Davie</h4>
                        <div class="rental-prices">
                            <div class="rental-price-item">
                                <span>2BR/2BA Apartment</span>
                                <span><strong>$1,800-$2,400/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>3BR/2BA House</span>
                                <span><strong>$2,500-$3,500/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>4BR/3BA House</span>
                                <span><strong>$3,200-$4,500/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>Ranch Properties</span>
                                <span><strong>$4,000-$7,000/mo</strong></span>
                            </div>
                        </div>
                        <p style="margin-top: 15px; color: #666; font-size: 0.9em;">
                            <strong>Unique Options:</strong> Horse properties available<br>
                            <strong>Near JCC:</strong> Walking distance options $2,200-$3,000<br>
                            <strong>University Area:</strong> More rental flexibility
                        </p>
                    </div>
                    
                    <div class="rental-card">
                        <h4><span class="badge badge-international">NEW</span> 🌴 Aventura</h4>
                        <div class="rental-prices">
                            <div class="rental-price-item">
                                <span>1BR Luxury Condo</span>
                                <span><strong>$2,800-$4,000/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>2BR/2BA Condo</span>
                                <span><strong>$3,500-$5,500/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>3BR/3BA Condo</span>
                                <span><strong>$5,000-$9,000/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>Penthouse/Luxury</span>
                                <span><strong>$8,000-$20,000/mo</strong></span>
                            </div>
                        </div>
                        <p style="margin-top: 15px; color: #666; font-size: 0.9em;">
                            <strong>Building Amenities:</strong> Pools, gyms, concierge included<br>
                            <strong>NYC-Style Living:</strong> High-rise luxury, walk to shops<br>
                            <strong>International Feel:</strong> 40% foreign buyers/renters
                        </p>
                    </div>
                    
                    <div class="rental-card">
                        <h4><span class="badge badge-international">NEW</span> 🏖️ North Miami Beach</h4>
                        <div class="rental-prices">
                            <div class="rental-price-item">
                                <span>2BR/2BA Apartment</span>
                                <span><strong>$2,200-$3,000/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>3BR/2BA House</span>
                                <span><strong>$3,000-$4,200/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>4BR/3BA House</span>
                                <span><strong>$4,000-$5,500/mo</strong></span>
                            </div>
                            <div class="rental-price-item">
                                <span>Waterfront</span>
                                <span><strong>$5,000-$10,000/mo</strong></span>
                            </div>
                        </div>
                        <p style="margin-top: 15px; color: #666; font-size: 0.9em;">
                            <strong>Beach Access:</strong> 10-15 min to beach<br>
                            <strong>Jewish Community:</strong> Orthodox & secular mix<br>
                            <strong>Value:</strong> More affordable than Aventura
                        </p>
                    </div>
                    
                    <div class="rental-card">
                        <h4>🎯 Rental Strategy Tips</h4>
                        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
                            <strong>For NYC Families:</strong>
                            <ul style="margin: 10px 0; padding-left: 20px;">
                                <li>Start with 6-12 month lease to test area</li>
                                <li>Peak season (Dec-Apr) has 20-30% higher prices</li>
                                <li>Many landlords require excellent credit (720+)</li>
                                <li>Consider furnished rentals initially ($500-1000/mo premium)</li>
                                <li>Corporate housing available in Aventura ($4-8K/mo)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="living" class="content-section">
            <div class="living-considerations-section">
                <h2>Cost of Living & Daily Life Considerations</h2>
                <p style="color: #7f8c8d; margin-bottom: 20px;">Understanding the real costs and daily realities of life in each area beyond housing.</p>
                
                <div class="traffic-card">
                    <h3>🚗 Traffic Patterns & Commute Times</h3>
                    <div class="detail-grid">
                        <div>
                            <h4>Morning Rush (7-9 AM)</h4>
                            <ul style="list-style: none; padding: 0;">
                                <li><strong>Weston to Downtown Miami:</strong> 45-65 minutes</li>
                                <li><strong>Cooper City to Fort Lauderdale:</strong> 25-35 minutes</li>
                                <li><strong>Davie to Miami Beach:</strong> 35-50 minutes</li>
                                <li><strong>Aventura to Downtown:</strong> 25-40 minutes</li>
                                <li><strong>School Drop-off Congestion:</strong> Add 15-20 min</li>
                            </ul>
                        </div>
                        <div>
                            <h4>Key Traffic Insights</h4>
                            <ul style="list-style: none; padding: 0;">
                                <li><strong>I-75:</strong> Heavy congestion 7-9am, 4-7pm</li>
                                <li><strong>I-95:</strong> Avoid if possible during rush hours</li>
                                <li><strong>Turnpike:</strong> Fastest but has tolls ($5-10/day)</li>
                                <li><strong>Local Roads:</strong> US-1 always congested</li>
                                <li><strong>Friday Traffic:</strong> Starts at 2 PM year-round</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <h3 style="margin-top: 30px; margin-bottom: 20px;">💰 Monthly Cost of Living Comparison (Family of 4)</h3>
                <div class="cost-living-grid">
                    <div class="cost-item">
                        <div class="cost-item-label">Weston</div>
                        <div class="cost-item-value">$8,500-12,000</div>
                        <small>Excluding rent/mortgage</small>
                    </div>
                    <div class="cost-item">
                        <div class="cost-item-label">Cooper City</div>
                        <div class="cost-item-value">$7,500-10,000</div>
                        <small>Best value option</small>
                    </div>
                    <div class="cost-item">
                        <div class="cost-item-label">Davie</div>
                        <div class="cost-item-value">$7,000-9,500</div>
                        <small>Most affordable</small>
                    </div>
                    <div class="cost-item">
                        <div class="cost-item-label">Aventura</div>
                        <div class="cost-item-value">$9,000-13,000</div>
                        <small>Urban premium</small>
                    </div>
                    <div class="cost-item">
                        <div class="cost-item-label">North Miami Beach</div>
                        <div class="cost-item-value">$8,000-11,000</div>
                        <small>Beach lifestyle</small>
                    </div>
                </div>
                
                <h3 style="margin-top: 30px; margin-bottom: 20px;">🛒 Detailed Monthly Expenses Breakdown</h3>
                <div class="detail-grid">
                    <div class="detail-section">
                        <h4>Essential Services</h4>
                        <ul class="detail-list">
                            <li><strong>Electricity (Summer):</strong> $250-400/mo (AC runs constantly)</li>
                            <li><strong>Water/Sewer:</strong> $80-150/mo</li>
                            <li><strong>Internet/Cable:</strong> $150-250/mo (Xfinity/AT&T)</li>
                            <li><strong>Lawn Service:</strong> $100-200/mo (HOA may require)</li>
                            <li><strong>Pool Service:</strong> $125-175/mo (if applicable)</li>
                            <li><strong>Pest Control:</strong> $50-75/mo (essential in FL)</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h4>Transportation Costs</h4>
                        <ul class="detail-list">
                            <li><strong>Two Cars (payments):</strong> $800-1,500/mo</li>
                            <li><strong>Insurance (2 cars):</strong> $300-500/mo</li>
                            <li><strong>Gas:</strong> $300-500/mo (everything is far)</li>
                            <li><strong>Tolls:</strong> $100-300/mo (SunPass essential)</li>
                            <li><strong>Maintenance:</strong> $150-250/mo average</li>
                            <li><strong>Teen Driver Insurance:</strong> +$200-400/mo</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h4>Groceries & Dining</h4>
                        <ul class="detail-list">
                            <li><strong>Groceries (Family of 4):</strong> $1,200-1,800/mo</li>
                            <li><strong>Kosher Groceries:</strong> +20-30% premium</li>
                            <li><strong>Dining Out (2x/week):</strong> $600-1,000/mo</li>
                            <li><strong>School Lunches:</strong> $200-300/mo (2 kids)</li>
                            <li><strong>Israeli Products:</strong> Available but 2x NYC prices</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h4>Kids' Activities</h4>
                        <ul class="detail-list">
                            <li><strong>Swimming Lessons:</strong> $150-250/mo per child</li>
                            <li><strong>Hebrew Tutoring:</strong> $200-300/mo per child</li>
                            <li><strong>Sports/Activities:</strong> $200-400/mo per child</li>
                            <li><strong>Summer Camp:</strong> $3,000-5,000 per child</li>
                            <li><strong>Bar/Bat Mitzvah Prep:</strong> $300-500/mo</li>
                            <li><strong>Gaming/Coding Classes:</strong> $200-400/mo</li>
                        </ul>
                    </div>
                </div>
                
                <h3 style="margin-top: 30px; margin-bottom: 20px;">🏥 Healthcare & Insurance Considerations</h3>
                <div class="info-box">
                    <strong>Important for NYC Families:</strong>
                    <ul style="margin-top: 10px;">
                        <li><strong>Health Insurance:</strong> $1,200-2,000/mo (family plan) if not employer-covered</li>
                        <li><strong>Hurricane Insurance:</strong> $3,000-5,000/year (mandatory)</li>
                        <li><strong>Flood Insurance:</strong> $500-2,000/year (location dependent)</li>
                        <li><strong>Car Insurance:</strong> 40% higher than NY due to uninsured drivers</li>
                        <li><strong>Pediatricians:</strong> Book 3-6 months ahead for good ones</li>
                        <li><strong>Specialists:</strong> Often 2-3 month waits</li>
                    </ul>
                </div>
                
                <h3 style="margin-top: 30px; margin-bottom: 20px;">🌴 Quality of Life Factors</h3>
                <div class="qualitative-grid">
                    <div class="qualitative-card">
                        <h4>Weather Reality Check</h4>
                        <p>May-October: 90°F+ with 80% humidity daily. Rain every afternoon 3-5pm. Hurricane season June-November requires preparation. December-April: Perfect 75-80°F weather. AC runs 9 months/year - budget accordingly. Mold is a constant battle in summer.</p>
                    </div>
                    
                    <div class="qualitative-card">
                        <h4>Israeli Product Availability</h4>
                        <p>Davie: Best selection at Kosher Kingdom, Pita Plus. Aventura: Kosher restaurants and markets abundant. Israeli products cost 2x NYC prices. Bissli, Bamba, Elite chocolate readily available. Fresh pita and hummus at multiple locations. Hebrew newspapers at most Jewish markets.</p>
                    </div>
                    
                    <div class="qualitative-card">
                        <h4>Cultural Adjustments</h4>
                        <p>Everything closes earlier than NYC (9-10pm). No walking culture - you drive everywhere. People are friendlier but less direct than NYC. "Island time" - service is slower. No basement storage in most homes. Hurricane prep becomes routine.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="map" class="content-section">
            <div class="map-controls">
                <h3>Interactive Area Map - Extended Coverage</h3>
                <p style="color: #7f8c8d; margin-bottom: 15px;">Now including Aventura and North Miami Beach. Explore exact locations of schools, swimming facilities, community centers, and luxury neighborhoods.</p>
                <div class="map-filters">
                    <label style="display: inline-flex; align-items: center; margin-right: 15px; cursor: pointer;">
                        <input type="checkbox" id="filter-all" checked onchange="toggleAllLayers(this)">
                        <span style="margin-left: 5px;">Show All</span>
                    </label>
                    <label style="display: inline-flex; align-items: center; margin-right: 15px; cursor: pointer;">
                        <input type="checkbox" id="filter-elementary" checked onchange="toggleMapLayer('elementary')">
                        <span style="margin-left: 5px;">Elementary Schools (9yo)</span>
                    </label>
                    <label style="display: inline-flex; align-items: center; margin-right: 15px; cursor: pointer;">
                        <input type="checkbox" id="filter-middle" checked onchange="toggleMapLayer('middle')">
                        <span style="margin-left: 5px;">Middle Schools (13yo)</span>
                    </label>
                    <label style="display: inline-flex; align-items: center; margin-right: 15px; cursor: pointer;">
                        <input type="checkbox" id="filter-community" checked onchange="toggleMapLayer('community')">
                        <span style="margin-left: 5px;">Community Centers</span>
                    </label>
                    <label style="display: inline-flex; align-items: center; margin-right: 15px; cursor: pointer;">
                        <input type="checkbox" id="filter-swimming" checked onchange="toggleMapLayer('swimming')">
                        <span style="margin-left: 5px;">Swimming Facilities</span>
                    </label>
                    <label style="display: inline-flex; align-items: center; margin-right: 15px; cursor: pointer;">
                        <input type="checkbox" id="filter-luxury" checked onchange="toggleMapLayer('luxury')">
                        <span style="margin-left: 5px;">Luxury Communities</span>
                    </label>
                </div>
            </div>
            <div id="mapContainer"></div>
        </div>
        
        <div id="comparison" class="content-section">
            <div class="comparison-table">
                <h2>Comprehensive Comparison Matrix - All 7 Options</h2>
                <p style="color: #7f8c8d; margin-bottom: 20px;">Complete data for all locations including the newly added Aventura and North Miami Beach options.</p>
                
                <div class="warning-box" style="margin-bottom: 20px;">
                    <strong>🚸 Critical District Difference:</strong>
                    <ul style="margin-top: 10px; margin-bottom: 0;">
                        <li><strong>Broward County:</strong> Weston, Cooper City, Davie - Same school calendar, policies, and registration</li>
                        <li><strong>Miami-Dade County:</strong> Aventura, North Miami Beach - Different calendar (may start/end on different dates), separate registration system</li>
                        <li><strong>Impact:</strong> If you have friends in different counties, your kids may have different vacation schedules!</li>
                    </ul>
                </div>
                
                <div style="overflow-x: auto;">
                <table id="comparisonTable">
                    <thead>
                        <tr>
                            <th>Location</th>
                            <th>Elementary Options</th>
                            <th>Middle Options</th>
                            <th>Academic Data</th>
                            <th>Community Demographics</th>
                            <th>Swimming</th>
                            <th>Safety Stats</th>
                            <th>Housing (Buy/Rent)</th>
                            <th>Total Score</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Weston Public</strong><br><span class="badge badge-secular">100% Secular</span></td>
                            <td>
                                <strong>Everglades Elementary</strong><br>10/10, Math: 89%<br>
                                <strong>Gator Run Elementary</strong><br>10/10, Math: 87%
                            </td>
                            <td>
                                <strong>Falcon Cove Middle</strong><br>#112 FL, 98% Algebra<br>
                                <strong>Tequesta Trace</strong><br>9/10, Cambridge
                            </td>
                            <td>Top 5% in Florida<br>State champions<br>Cambridge programs</td>
                            <td>18,000 Jewish residents<br>Latin-Jewish mix<br>15% Israeli families</td>
                            <td>YMCA Olympic pool<br>Cyclones accessible<br>Year-round programs</td>
                            <td><span class="badge badge-safety">Safest: 5.5/1000</span><br>Lowest in Broward</td>
                            <td>Buy: $600K-$2M+<br>Rent: $3,500-$6,500</td>
                            <td><strong id="weston-score">85%</strong></td>
                        </tr>
                        <tr>
                            <td><strong>Cooper City Public</strong><br><span class="badge badge-secular">100% Secular</span></td>
                            <td>
                                <strong>Embassy Creek</strong><br>9/10, Math: 83%<br>
                                <strong>Cooper City Elem</strong><br>8/10, STEAM focus
                            </td>
                            <td>
                                <strong>Pioneer Middle</strong><br>#140 FL<br>Cambridge program
                            </td>
                            <td>A-rated schools<br>Above state avg<br>Strong gifted prog</td>
                            <td>Growing Israeli presence<br>2,664 Jewish HH<br>Family-focused</td>
                            <td><span class="badge badge-safety">Cyclones Home</span><br>USA Swimming<br>Top program</td>
                            <td>Very safe: 10/1000<br>88% safer than US</td>
                            <td>Buy: $450K-$1.2M<br>Rent: $2,800-$5,000</td>
                            <td><strong id="cooper-score">78%</strong></td>
                        </tr>
                        <tr>
                            <td><strong>Davie Public</strong><br><span class="badge badge-secular">100% Secular</span></td>
                            <td>
                                <strong>Fox Trail</strong><br>9/10, Math: 67%<br>
                                <strong>Silver Ridge</strong><br>8/10, Leader in Me
                            </td>
                            <td>
                                <strong>Indian Ridge</strong><br>7/10, HS credits<br>
                                <strong>Nova Middle</strong><br>6/10, Diverse
                            </td>
                            <td>Mixed ratings<br>Near universities<br>Some strong programs</td>
                            <td><span class="badge badge-safety">Israeli Hub</span><br>4,032 Jewish HH<br>Hebrew everywhere</td>
                            <td>JCC pool on-site<br>Pine Island Aquatic<br>Multiple options</td>
                            <td>Moderate: 20/1000<br>University area</td>
                            <td>Buy: $400K-$1.5M<br>Rent: $2,500-$4,500</td>
                            <td><strong id="davie-score">72%</strong></td>
                        </tr>
                        <tr style="background-color: #e3f2fd;">
                            <td><strong>Aventura</strong><br><span class="badge badge-international">International Hub</span><br><span class="badge badge-secular">K-8 Charter</span></td>
                            <td colspan="2">
                                <div style="background: #d4edda; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                                    <strong>✅ SAME SCHOOL - Aventura City of Excellence (ACES)</strong>
                                </div>
                                <strong>Both Children:</strong> ACES is a K-8 charter school<br>
                                <strong>9yo:</strong> 4th grade at ACES<br>
                                <strong>13yo:</strong> 8th grade at ACES<br>
                                <strong>Benefits:</strong> One school, innovative curriculum, international community
                            </td>
                            <td>A-rated charter<br>Opened 2003<br>Flexible curriculum<br>Strong academics</td>
                            <td><span class="badge badge-international">40% International</span><br>Israeli, Brazilian, French<br>Russian, Argentine<br>Manhattan-like diversity</td>
                            <td>Beach proximity<br>Building pools<br>Aquatic centers<br>Ocean access</td>
                            <td>Safe: 15/1000<br>Gated buildings<br>24/7 security</td>
                            <td>Buy: $400K-$2M+ condos<br>Rent: $3,500-$9,000<br>Luxury high-rises</td>
                            <td><strong id="aventura-score">82%</strong></td>
                        </tr>
                        <tr style="background-color: #fff5e6;">
                            <td><strong>North Miami Beach</strong><br><span class="badge">Hillel Option</span></td>
                            <td colspan="2">
                                <div style="background: #d4edda; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                                    <strong>✅ SAME SCHOOL Option - Scheck Hillel Community School (K-12)</strong>
                                </div>
                                <strong>Both Children at Hillel:</strong><br>
                                <strong>9yo:</strong> Lower School<br>
                                <strong>13yo:</strong> Middle School<br>
                                <strong>Benefits:</strong> #3 Jewish school in Miami, 1,300+ students, 7:1 ratio<br>
                                <strong>Alternative:</strong> Strong public schools also available
                            </td>
                            <td>#3 Jewish school Miami<br>Deep Jewish identity<br>Strong academics<br>Large resources</td>
                            <td>Mixed Orthodox/Secular<br>Beach community<br>International presence<br>Growing Israeli pop</td>
                            <td>Beach access<br>Community pools<br>Ocean swimming<br>Water sports</td>
                            <td>Moderate: 18/1000<br>Beach area varies<br>Improving rapidly</td>
                            <td>Buy: $350K-$1.5M<br>Rent: $3,000-$5,500<br>Waterfront premium</td>
                            <td><strong id="nmb-score">76%</strong></td>
                        </tr>
                        <tr>
                            <td><strong>Posnack School</strong><br><span class="badge">Secular Jewish Culture</span></td>
                            <td colspan="2">
                                <div style="background: #d4edda; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                                    <strong>✅ SAME SCHOOL - Both Children Together (K-12)</strong>
                                </div>
                                Both children at David Posnack Jewish Day School<br>
                                Integrated curriculum, Hebrew maintenance, Israeli culture focus
                            </td>
                            <td>#1 Jewish school FL<br>College prep focus<br>Small classes (8:1)</td>
                            <td><span class="badge badge-safety">Perfect for Israelis</span><br>Hebrew maintained<br>Israeli culture central</td>
                            <td>JCC pool included<br>Full programs<br>Swim team access</td>
                            <td>Same as Davie: 20/1000<br>Secure campus</td>
                            <td>Davie prices +<br>Tuition: ~$50K/yr<br>(both children)</td>
                            <td><strong id="posnack-score">88%</strong></td>
                        </tr>
                        <tr>
                            <td><strong>American Heritage</strong><br><span class="badge badge-secular">Elite Private</span></td>
                            <td colspan="2">
                                <div style="background: #d4edda; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                                    <strong>✅ SAME SCHOOL - Both Children Together (K-12)</strong>
                                </div>
                                #1 Private school in FL, 88 Merit Scholars<br>
                                Pre-professional tracks, rolling admissions
                            </td>
                            <td>Top 1% nationally<br>88 Merit Scholars<br>6 career tracks</td>
                            <td>Diverse international<br>Not Israeli-focused<br>25% international</td>
                            <td>Limited on-campus<br>Partner facilities<br>30 min to pools</td>
                            <td>Plantation area<br>Private security</td>
                            <td>Varies + Tuition<br>~$85K/yr total<br>(both children)</td>
                            <td><strong id="heritage-score">75%</strong></td>
                        </tr>
                    </tbody>
                </table>
                </div>
            </div>
        </div>
        
        <div id="qualitative" class="content-section">
            <div class="qualitative-section">
                <h2>Extended Community Insights - Including New Areas</h2>
                <p style="color: #7f8c8d; margin-bottom: 20px;">Deep insights from Israeli families living in all areas, including the newly discovered Aventura and North Miami Beach communities.</p>
                
                <div class="qualitative-grid">
                    <div class="qualitative-card" style="border-left-color: #ff6b6b;">
                        <h4>🌴 Aventura: Manhattan of the South</h4>
                        <p>Aventura is where Israeli families who miss NYC's urban energy feel most at home. You'll hear Hebrew, Portuguese, French, and Russian in the elevator. The buildings have amenities that rival Manhattan's best - pools, gyms, spas, and concierge services. Aventura Mall is your backyard, and you can actually walk to restaurants and shops. The downside? No yard for the kids, and the "Miami lifestyle" can be materialistic. Israeli families love that kids can be more independent here - they can walk to friends in the same building. The international vibe means your kids will have friends from everywhere, not just America.</p>
                    </div>
                    
                    <div class="qualitative-card" style="border-left-color: #4ecdc4;">
                        <h4>🏖️ North Miami Beach: Beach Life Balance</h4>
                        <p>North Miami Beach offers something unique - actual beach proximity with a strong Jewish infrastructure. Scheck Hillel School has both religious and secular Jewish families, creating an interesting dynamic. Some Israeli families find it perfect because kids get Jewish education without Orthodox intensity. Others worry about the religious influence. The area is gentrifying rapidly - what was sketchy 5 years ago is now trendy. You're 15 minutes from the beach, 20 from Aventura's shopping, and housing is still (relatively) affordable. The orthodox community is visible but not dominant. Many Israelis here are in real estate or tech.</p>
                    </div>
                    
                    <div class="qualitative-card">
                        <h4>🚨 Why NOT Parkland (Important)</h4>
                        <p>While Parkland has highly-rated schools, recent reports of antisemitic incidents are concerning. Jewish students faced exclusion attempts from school fairs, and vandalism was dismissed as "just vandalism" rather than being addressed as antisemitism. Despite a significant Jewish population, several Israeli families have reported feeling unwelcome. The academic excellence doesn't compensate for potential social challenges your children might face. Many families who started in Parkland have relocated to Weston or Cooper City.</p>
                    </div>
                    
                    <div class="qualitative-card" style="border-left-color: #f39c12;">
                        <h4>🏫 The District Split Challenge</h4>
                        <p>Here's what nobody tells you: Broward County (Weston, Cooper City, Davie) and Miami-Dade County (Aventura, North Miami Beach) have different school calendars. Your Aventura friends' kids might have spring break a week different from your Weston friends. Teacher planning days don't align. Even start/end dates can be different. Some families find this isolating - you can't coordinate vacations with friends across county lines. Others use it strategically, booking cheaper flights during off-peak times. If you're choosing between counties, consider where most of your social circle will likely form.</p>
                    </div>
                    
                    <div class="qualitative-card">
                        <h4>💼 Work-Life Integration</h4>
                        <p>NYC Israeli parents are shocked by South Florida's work culture. People actually leave the office by 5:30 PM. Youth sports practice starts at 4 PM, assuming a parent is available. There's no "stay late" culture - family time is respected. The challenge? Everything requires driving. You'll spend 2-3 hours daily in the car. Successful families often have one parent with flexible hours to manage pickup/dropoff. Remote work is a game-changer here. Aventura is the only area where teens can have some independence without a car.</p>
                    </div>
                    
                    <div class="qualitative-card" style="border-left-color: #9b59b6;">
                        <h4>🎮 Gaming Culture & Tech Scene</h4>
                        <p>Your game-loving 13-year-old will find peers everywhere, but organized programs vary. Weston kids often have high-end gaming setups and join online academies. Cooper City has grassroots gaming clubs. Davie, near NSU, has the most structured programs. Aventura kids game in building common areas with international friends. The surprise? Many Israeli parents here embrace gaming as a career path, unlike in Israel. Tech parents from Israel are concentrated in Aventura and Weston, creating informal mentorship networks. Several Israeli-founded gaming startups recruit teen testers from local schools.</p>
                    </div>
                    
                    <div class="qualitative-card">
                        <h4>🏊 Swimming Culture Differences</h4>
                        <p>Swimming in South Florida isn't just an activity - it's a lifestyle and social network. Cooper City Cyclones is where Israeli kids often find their tribe. Unlike NYC's indoor pools, here it's year-round outdoor swimming. Swim meets are social events where Israeli families gather. The commitment level surprises NYC families - practice is 5-6 days/week for competitive swimmers. The upside? Kids develop incredible discipline and friendships. Many Israeli parents become timers or volunteers, creating community. Warning: "Swimming pool hair" (green tinge from chlorine) is real - budget for special shampoo!</p>
                    </div>
                    
                    <div class="qualitative-card" style="border-left-color: #e74c3c;">
                        <h4>🏠 Housing Reality Check</h4>
                        <p>Coming from NYC, space seems unlimited, but there are surprises. No basements mean creative storage solutions. Hurricanes mean impact windows (expensive but necessary). HOAs in Weston can be strict - wrong mailbox color gets you fined. Davie offers freedom but less polish. Aventura condos have NYC-style boards that can be difficult. Cooper City hits the sweet spot for many. Israeli families often rent for a year before buying to understand neighborhoods. Pro tip: Visit during summer to experience true heat/humidity before committing. Many homes need hurricane upgrades not reflected in listing prices.</p>
                    </div>
                    
                    <div class="qualitative-card">
                        <h4>🌺 The "Florida Israeli" Identity</h4>
                        <p>Your kids will develop a unique identity - not quite Israeli, not quite American, but "Florida Israeli." They'll speak English with friends, Hebrew at home, and Spanish with half their classmates. They'll celebrate Jewish holidays and Halloween with equal enthusiasm. Beach culture replaces NYC culture. Bar/Bat Mitzvahs here are different - often more elaborate than in Israel, less traditional than NY. Kids adapt faster than parents. The challenge is maintaining Hebrew - without daily use, it fades. Successful families create Hebrew-only zones: dinner time, Sunday mornings, or car rides. Israeli summer camps help maintain connection.</p>
                    </div>
                </div>
                
                <h3 style="margin-top: 30px; margin-bottom: 20px;">🔍 Insider Tips by Area</h3>
                <div class="detail-grid">
                    <div class="detail-section">
                        <h4>Aventura Insider Knowledge</h4>
                        <ul class="detail-list">
                            <li><strong>Best Buildings for Israelis:</strong> Turnberry, Porto Vita, Williams Island</li>
                            <li><strong>Shopping:</strong> Aventura Mall has Israeli-owned stores</li>
                            <li><strong>Hidden Gem:</strong> Waterways dog park - Israeli family meetup spot</li>
                            <li><strong>Food:</strong> Fuego (Argentine-Israeli owner), Mozart Bakery</li>
                            <li><strong>Avoid:</strong> Buildings without hurricane shutters</li>
                            <li><strong>School Alternative:</strong> Some use Cushman School (private)</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h4>North Miami Beach Secrets</h4>
                        <ul class="detail-list">
                            <li><strong>Best Areas:</strong> Eastern Shores, Skylake neighborhoods</li>
                            <li><strong>Beach Access:</strong> Haulover Park - family section north</li>
                            <li><strong>Shopping:</strong> Bal Harbour Shops (10 min), Aventura Mall (15 min)</li>
                            <li><strong>Community:</strong> Lehrman School also popular with Israelis</li>
                            <li><strong>Warning:</strong> Check flood zones carefully</li>
                            <li><strong>Rising Area:</strong> Keystone Islands becoming Israeli enclave</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="details" class="content-section">
            <div class="detail-panel">
                <h2>Complete Data Analysis - All 7 Locations</h2>
                <p style="color: #7f8c8d; margin-bottom: 20px;">Comprehensive information for all areas including the newly researched Aventura and North Miami Beach options.</p>
                
                <div class="detail-grid">
                    <div class="detail-section">
                        <h4>🌴 Aventura - The International Urban Choice</h4>
                        <ul class="detail-list">
                            <li><strong>School Option:</strong> Aventura City of Excellence School (ACES) - K-8 charter serving both children</li>
                            <li><strong>Academic Performance:</strong> A-rated school, innovative curriculum, opened 2003</li>
                            <li><strong>Class Sizes:</strong> Average 20-22 students, charter flexibility</li>
                            <li><strong>Demographics:</strong> 40% international families - Israeli, Brazilian, French, Russian, Argentine</li>
                            <li><strong>Housing:</strong> 95% condos/apartments, luxury high-rises dominate</li>
                            <li><strong>Price Range:</strong> Buy: $400K-$2M+ | Rent: $3,500-$9,000/mo</li>
                            <li><strong>Lifestyle:</strong> Walkable, urban, similar to Manhattan living</li>
                            <li><strong>Swimming:</strong> Building pools, beach 20 min, aquatic centers</li>
                            <li><strong>Shopping:</strong> Aventura Mall - 3rd largest in US</li>
                            <li><strong>Commute:</strong> To Downtown Miami: 25-40 min | To FLL Airport: 20 min</li>
                            <li><strong>Israeli Community:</strong> Largest concentration in high-rises, Hebrew common</li>
                            <li><strong>High School Path:</strong> Need to change schools - Dr. Michael Krop Senior High</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h4>🏖️ North Miami Beach - The Beach Community Choice</h4>
                        <ul class="detail-list">
                            <li><strong>Private Option:</strong> Scheck Hillel Community School - #3 Jewish school in Miami</li>
                            <li><strong>Hillel Details:</strong> K-12, 1,300+ students, 7:1 student-teacher ratio</li>
                            <li><strong>Public Options:</strong> Ojus Elementary (7/10), Highland Oaks Middle (6/10)</li>
                            <li><strong>Jewish Community:</strong> Mix of Orthodox and secular, growing Israeli population</li>
                            <li><strong>Beach Access:</strong> 10-15 minutes to beach, water sports culture</li>
                            <li><strong>Housing Mix:</strong> Single family homes, condos, some waterfront</li>
                            <li><strong>Price Range:</strong> Buy: $350K-$1.5M | Rent: $3,000-$5,500/mo</li>
                            <li><strong>Safety:</strong> 18 incidents per 1,000 - moderate, improving rapidly</li>
                            <li><strong>Gentrification:</strong> Rapidly changing, property values rising</li>
                            <li><strong>Shopping:</strong> Close to Bal Harbour Shops, Aventura Mall</li>
                            <li><strong>Character:</strong> More diverse economically than Aventura</li>
                            <li><strong>Warning:</strong> Check flood zones and hurricane history</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h4>⚠️ Areas to Avoid & Important Warnings</h4>
                        <ul class="detail-list">
                            <li><strong>Parkland:</strong> Despite top schools, reports of antisemitic incidents</li>
                            <li><strong>Hallandale Beach:</strong> High crime rates, poor schools</li>
                            <li><strong>Parts of Hollywood:</strong> Very mixed quality, research specific areas</li>
                            <li><strong>Pembroke Park:</strong> Industrial area, not family-friendly</li>
                            <li><strong>West of US-27:</strong> Too far from Jewish life, new development risks</li>
                            <li><strong>Flood Zones:</strong> Check FEMA maps - insurance can be $5K+/year</li>
                            <li><strong>HOA Restrictions:</strong> Some ban religious displays, check rules</li>
                            <li><strong>School Boundaries:</strong> Can change yearly, verify before buying</li>
                            <li><strong>Traffic Patterns:</strong> Some areas have 1-hour school commutes</li>
                            <li><strong>Summer Camps:</strong> Book by February or lose out</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h4>📊 Decision Matrix Factors</h4>
                        <ul class="detail-list">
                            <li><strong>Both Kids Same School:</strong> Posnack, Heritage, ACES (K-8), Hillel</li>
                            <li><strong>Highest Israeli Concentration:</strong> Aventura, Davie, North Miami Beach</li>
                            <li><strong>Best Swimming Programs:</strong> Cooper City (Cyclones), Weston (YMCA)</li>
                            <li><strong>Game Design Access:</strong> Davie (NSU programs), Lauderhill magnet</li>
                            <li><strong>Most Affordable:</strong> Davie, parts of Cooper City</li>
                            <li><strong>Best Weather/Beach:</strong> Aventura, North Miami Beach</li>
                            <li><strong>Safest:</strong> Weston, Cooper City, Aventura buildings</li>
                            <li><strong>Most NYC-like:</strong> Aventura (urban, walkable, diverse)</li>
                            <li><strong>Best Value:</strong> Cooper City (quality vs. price)</li>
                            <li><strong>Easiest Integration:</strong> Davie (established Israeli community)</li>
                            <li><strong>Academic Excellence:</strong> Weston public, Heritage private</li>
                            <li><strong>Jewish + Secular:</strong> Posnack, Hillel (with secular families)</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h4>💰 Full Cost Analysis (Annual)</h4>
                        <ul class="detail-list">
                            <li><strong>Weston Public:</strong> $0 tuition + $8-12K living = $96-144K total</li>
                            <li><strong>Cooper City Public:</strong> $0 tuition + $7-10K living = $84-120K total</li>
                            <li><strong>Davie Public:</strong> $0 tuition + $7-9K living = $84-108K total</li>
                            <li><strong>Aventura ACES:</strong> $0 tuition + $9-13K living = $108-156K total</li>
                            <li><strong>NMB Public:</strong> $0 tuition + $8-11K living = $96-132K total</li>
                            <li><strong>Posnack:</strong> $50K tuition + $7-9K living = $134-158K total</li>
                            <li><strong>Heritage:</strong> $85K tuition + $8-10K living = $176-205K total</li>
                            <li><strong>Hillel:</strong> $45K tuition + $8-11K living = $144-177K total</li>
                        </ul>
                        <p style="margin-top: 10px; font-size: 0.9em; color: #666;">
                            * Living costs include all monthly expenses except housing<br>
                            * Add housing: Rent ($30-60K/year) or mortgage + taxes + insurance
                        </p>
                    </div>
                    
                    <div class="detail-section">
                        <h4>🚗 Practical Daily Life Considerations</h4>
                        <ul class="detail-list">
                            <li><strong>Two Cars Essential:</strong> Budget $800-1500/mo for payments + insurance</li>
                            <li><strong>Hurricane Prep:</strong> Generator ($5-10K), shutters ($15-30K), supplies ($500/yr)</li>
                            <li><strong>A/C Dependency:</strong> Runs 9 months, $300-500/mo summer electric bills</li>
                            <li><strong>No Public Transit:</strong> Everything requires driving, teens need rides until 16</li>
                            <li><strong>Israeli Products:</strong> Available but expensive - stock up on Israel trips</li>
                            <li><strong>Beach Reality:</strong> Beautiful but requires sun protection year-round</li>
                            <li><strong>Social Life:</strong> Revolves around kids' activities and religious communities</li>
                            <li><strong>Time Zone:</strong> Israel is 7-8 hours ahead - affects family calls</li>
                            <li><strong>Jewish Holidays:</strong> Public schools open - need backup childcare</li>
                            <li><strong>Summer:</strong> Too hot for outdoor activities 11am-4pm May-October</li>
                            <li><strong>Dress Code:</strong> Casual everywhere - shorts and sandals acceptable</li>
                            <li><strong>Pest Control:</strong> Mandatory - ants, roaches, and lizards are common</li>
                        </ul>
                    </div>
                </div>
                
                <div class="success-box">
                    <strong>Final Recommendation Framework:</strong> Based on your priorities:
                    <ul style="margin-top: 10px;">
                        <li><strong>If Israeli community is #1:</strong> Davie + Posnack or Aventura</li>
                        <li><strong>If academic excellence matters most:</strong> Weston public or Heritage</li>
                        <li><strong>If swimming is crucial:</strong> Cooper City (Cyclones base)</li>
                        <li><strong>If you want urban/international:</strong> Aventura (Manhattan feel)</li>
                        <li><strong>If you want best value:</strong> Cooper City public schools</li>
                        <li><strong>If you want beach lifestyle:</strong> North Miami Beach + Hillel</li>
                        <li><strong>If you want one school for both kids:</strong> Posnack, Heritage, ACES, or Hillel</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Calculate days until move
        function updateDaysLeft() {
            const moveDate = new Date('2025-08-25');
            const today = new Date();
            const daysLeft = Math.ceil((moveDate - today) / (1000 * 60 * 60 * 24));
            document.getElementById('daysLeft').textContent = daysLeft;
        }
        
        // Extended data structure including new areas
        const locationData = {
            weston: {
                name: "Weston Public Schools",
                coords: [26.1003, -80.3997],
                schools: {
                    elementary: [
                        {name: "Everglades Elementary", coords: [26.1020, -80.4010], data: "10/10 GreatSchools<br>Math: 89%, Reading: 84%<br>Science: 75%<br>FDOE Grade: A"},
                        {name: "Gator Run Elementary", coords: [26.0980, -80.3920], data: "10/10 GreatSchools<br>Math: 87%, Reading: 83%<br>Science: 76%<br>Immigrant-friendly"}
                    ],
                    middle: [
                        {name: "Falcon Cove Middle", coords: [26.1040, -80.3890], data: "#112 in Florida<br>98% Algebra 1 pass<br>State STEM Champions<br>Cambridge Program"},
                        {name: "Tequesta Trace Middle", coords: [26.0960, -80.3950], data: "9/10 GreatSchools<br>20+ clubs offered<br>A-rated FDOE<br>HS credits available"}
                    ]
                },
                scores: {
                    academic: 100,
                    stem: 90,
                    arts: 85,
                    gamedesign: 60,
                    community: 70,
                    swimming: 95,
                    safety: 100,
                    luxury: 95,
                    cost: 100,
                    international: 60,
                    beach: 30,
                    traffic: 70
                },
                details: {
                    population: "18,000 Jewish residents",
                    safety: "5.5 per 1,000 residents",
                    homePrice: "$600K-$2M+",
                    commute: "15-20 min to JCC"
                }
            },
            cooper: {
                name: "Cooper City Public Schools",
                coords: [26.0573, -80.2717],
                schools: {
                    elementary: [
                        {name: "Embassy Creek Elementary", coords: [26.0520, -80.2680], data: "9/10 GreatSchools<br>Math: 83%, Reading: 82%<br>#143 in Florida<br>Gifted program"},
                        {name: "Cooper City Elementary", coords: [26.0600, -80.2750], data: "8/10 GreatSchools<br>STEAM Club focus<br>Coding emphasis<br>Art Club available"}
                    ],
                    middle: [
                        {name: "Pioneer Middle School", coords: [26.0550, -80.2700], data: "#140 in Florida<br>Cambridge program<br>TV production<br>Near pool complex"}
                    ]
                },
                scores: {
                    academic: 85,
                    stem: 85,
                    arts: 80,
                    gamedesign: 65,
                    community: 70,
                    swimming: 100,
                    safety: 90,
                    luxury: 75,
                    cost: 100,
                    international: 50,
                    beach: 40,
                    traffic: 80
                },
                details: {
                    population: "Growing Israeli presence",
                    safety: "10 per 1,000 residents",
                    homePrice: "$450K-$1.2M",
                    commute: "10-15 min to JCC"
                }
            },
            davie: {
                name: "Davie Public Schools",
                coords: [26.0765, -80.2521],
                schools: {
                    elementary: [
                        {name: "Fox Trail Elementary", coords: [26.0820, -80.2400], data: "9/10 GreatSchools<br>Math: 67%, Reading: 69%<br>Art Club praised<br>Leader in Me program"},
                        {name: "Silver Ridge Elementary", coords: [26.0700, -80.2600], data: "8/10 GreatSchools<br>Chorus program<br>Student news broadcast<br>Harry Potter book club"}
                    ],
                    middle: [
                        {name: "Indian Ridge Middle", coords: [26.0780, -80.2450], data: "7/10 GreatSchools<br>HS credits available<br>Algebra, Geometry, Biology<br>Near JCC"},
                        {name: "Nova Middle School", coords: [26.0850, -80.2550], data: "6/10 GreatSchools<br>Mixed reviews<br>Basic programs<br>Diverse student body"}
                    ]
                },
                scores: {
                    academic: 75,
                    stem: 70,
                    arts: 70,
                    gamedesign: 85,
                    community: 100,
                    swimming: 80,
                    safety: 75,
                    luxury: 70,
                    cost: 100,
                    international: 70,
                    beach: 45,
                    traffic: 85
                },
                details: {
                    population: "Highest Jewish concentration",
                    safety: "20 per 1,000 residents",
                    homePrice: "$400K-$1.5M",
                    commute: "At JCC location"
                }
            },
            aventura: {
                name: "Aventura (NEW)",
                coords: [25.9561, -80.1394],
                schools: {
                    elementary: [
                        {name: "Aventura City of Excellence (K-8)", coords: [25.9550, -80.1400], data: "A-rated charter school<br>Both kids same school<br>K-8 program<br>International focus"}
                    ],
                    middle: [
                        {name: "ACES Middle School Division", coords: [25.9550, -80.1400], data: "Same campus as elementary<br>Innovative curriculum<br>Flexible programming<br>Strong academics"}
                    ]
                },
                scores: {
                    academic: 90,
                    stem: 85,
                    arts: 80,
                    gamedesign: 70,
                    community: 85,
                    swimming: 75,
                    safety: 85,
                    luxury: 100,
                    cost: 70,
                    international: 100,
                    beach: 70,
                    traffic: 60
                },
                details: {
                    population: "40% international families",
                    safety: "15 per 1,000 residents",
                    homePrice: "$400K-$2M+ condos",
                    commute: "25 min to beaches"
                }
            },
            nmb: {
                name: "North Miami Beach (NEW)",
                coords: [25.9331, -80.1625],
                schools: {
                    elementary: [
                        {name: "Scheck Hillel Community School", coords: [25.9300, -80.1600], data: "#3 Jewish School Miami<br>K-12 option<br>1,300+ students<br>7:1 ratio"},
                        {name: "Ojus Elementary", coords: [25.9350, -80.1650], data: "7/10 GreatSchools<br>Public option<br>Diverse student body<br>Basic programs"}
                    ],
                    middle: [
                        {name: "Hillel Middle School", coords: [25.9300, -80.1600], data: "Same campus K-12<br>Jewish identity focus<br>Strong academics<br>Large resources"},
                        {name: "Highland Oaks Middle", coords: [25.9400, -80.1700], data: "6/10 GreatSchools<br>Public option<br>Standard programs<br>Mixed reviews"}
                    ]
                },
                scores: {
                    academic: 80,
                    stem: 75,
                    arts: 75,
                    gamedesign: 60,
                    community: 80,
                    swimming: 85,
                    safety: 70,
                    luxury: 75,
                    cost: 85,
                    international: 75,
                    beach: 90,
                    traffic: 65
                },
                details: {
                    population: "Mixed Orthodox/Secular",
                    safety: "18 per 1,000 residents",
                    homePrice: "$350K-$1.5M",
                    commute: "15 min to beach"
                }
            },
            posnack: {
                name: "Davie + Posnack School",
                coords: [26.0641, -80.2549],
                schools: {
                    elementary: [
                        {name: "David Posnack Jewish Day School K-5", coords: [26.0641, -80.2549], data: "#1 Jewish School FL<br>STEM Lab & MakerSpace<br>Hebrew language<br>8:1 ratio"}
                    ],
                    middle: [
                        {name: "David Posnack Jewish Day School 6-8", coords: [26.0641, -80.2549], data: "Coding 101, Robotics<br>Video Production<br>1:1 laptop program<br>Israeli culture focus"}
                    ]
                },
                scores: {
                    academic: 95,
                    stem: 95,
                    arts: 85,
                    gamedesign: 90,
                    community: 100,
                    swimming: 85,
                    safety: 75,
                    luxury: 70,
                    cost: 30,
                    international: 80,
                    beach: 45,
                    traffic: 85
                },
                details: {
                    population: "Integrated Israeli community",
                    safety: "20 per 1,000 (Davie)",
                    homePrice: "$400K-$1.5M + tuition",
                    commute: "On JCC campus"
                }
            },
            heritage: {
                name: "American Heritage (Plantation)",
                coords: [26.1259, -80.2338],
                schools: {
                    elementary: [
                        {name: "American Heritage Lower School", coords: [26.1259, -80.2338], data: "#1 Private K-12 FL<br>Full academic program<br>130+ arts courses<br>Rolling admission"}
                    ],
                    middle: [
                        {name: "American Heritage Middle School", coords: [26.1259, -80.2338], data: "Engineering intro<br>Design & Modeling<br>Pre-professional tracks<br>88 Merit Scholars"}
                    ]
                },
                scores: {
                    academic: 100,
                    stem: 100,
                    arts: 100,
                    gamedesign: 85,
                    community: 50,
                    swimming: 60,
                    safety: 80,
                    luxury: 90,
                    cost: 20,
                    international: 70,
                    beach: 50,
                    traffic: 75
                },
                details: {
                    population: "Diverse, not Israeli-focused",
                    safety: "Secure private campus",
                    homePrice: "Varies + $42K tuition",
                    commute: "25 min to JCC"
                }
            }
        };
        
        // Initialize map
        let map;
        let markers = {
            elementary: [],
            middle: [],
            community: [],
            swimming: [],
            luxury: []
        };
        
        function initMap() {
            if (typeof L === 'undefined') {
                console.error('Leaflet library not loaded');
                document.getElementById('mapContainer').innerHTML = `
                    <div style="padding: 50px; text-align: center; background: #f8f9fa; border-radius: 10px;">
                        <h3 style="color: #e74c3c;">Map Loading Error</h3>
                        <p>The interactive map requires external libraries. Here's what you need to know about locations:</p>
                        <ul style="text-align: left; max-width: 600px; margin: 20px auto;">
                            <li><strong>Broward County:</strong> Weston, Cooper City, Davie</li>
                            <li><strong>Miami-Dade County:</strong> Aventura, North Miami Beach</li>
                            <li><strong>Different Counties = Different Calendars!</strong></li>
                        </ul>
                    </div>
                `;
                return;
            }
            
            try {
                // Create map with wider view to include new areas
                map = L.map('mapContainer').setView([26.0200, -80.2200], 11);
                
                // Add tile layer
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '© OpenStreetMap contributors',
                    maxZoom: 18
                }).addTo(map);
                
                // Add all location markers including new areas
                Object.keys(locationData).forEach(key => {
                    const location = locationData[key];
                    
                    // Add elementary schools
                    location.schools.elementary.forEach(school => {
                        addMarker(school.coords, 'elementary', school.name, school.data);
                    });
                    
                    // Add middle schools
                    location.schools.middle.forEach(school => {
                        addMarker(school.coords, 'middle', school.name, school.data);
                    });
                });
                
                // Add community centers
                addMarker([26.0641, -80.2549], 'community', 'David Posnack JCC', 
                    'Israeli community hub<br>Swimming pool<br>Youth programs<br>Maccabi Tzair movement');
                addMarker([25.9600, -80.1420], 'community', 'Aventura Community Center', 
                    'International community<br>Programs & events<br>Near ACES school');
                
                // Add swimming facilities
                addMarker([26.0950, -80.3850], 'swimming', 'Weston YMCA', 
                    '<span class="popup-highlight">Olympic pool</span><br>Competitive swim team<br>Year-round programs');
                addMarker([26.0575, -80.2720], 'swimming', 'Cooper City Pool Complex', 
                    '<span class="popup-highlight">Cooper City Cyclones</span><br>USA Swimming team<br>Best program');
                addMarker([25.9650, -80.1250], 'swimming', 'Aventura Aquatic Center',
                    'Modern facility<br>Programs for all ages<br>Near beach');
                
                // Add luxury communities
                addMarker([25.9550, -80.1350], 'luxury', 'Aventura Luxury Towers', 
                    '<span class="popup-highlight">International living</span><br>Turnberry, Porto Vita<br>Williams Island<br>NYC-style amenities');
                addMarker([25.9400, -80.1500], 'luxury', 'Eastern Shores NMB', 
                    'Waterfront homes<br>Growing Israeli presence<br>Beach proximity');
                
                // Add county boundary line
                const countyBoundary = L.polyline([
                    [26.0100, -80.5000],
                    [26.0100, -80.1000]
                ], {
                    color: 'red',
                    weight: 3,
                    opacity: 0.6,
                    dashArray: '10, 10'
                }).addTo(map);
                
                countyBoundary.bindPopup('County Line: Broward (North) | Miami-Dade (South)<br>Different school systems!');
                
            } catch (error) {
                console.error('Map initialization error:', error);
            }
        }
        
        function addMarker(coords, type, title, description) {
            const colors = {
                elementary: '#3498db',
                middle: '#9b59b6',
                community: '#e74c3c',
                swimming: '#1abc9c',
                luxury: '#f39c12'
            };
            
            const marker = L.circleMarker(coords, {
                radius: 12,
                fillColor: colors[type],
                color: '#fff',
                weight: 3,
                opacity: 1,
                fillOpacity: 0.8
            }).addTo(map);
            
            marker.bindPopup(`
                <div class="popup-title">${title}</div>
                <div class="popup-details">${description}</div>
            `);
            
            markers[type].push(marker);
        }
        
        function toggleMapLayer(layer) {
            if (typeof L === 'undefined' || !map) return;
            
            const checkbox = document.getElementById(`filter-${layer}`);
            const showAll = document.getElementById('filter-all');
            
            if (!checkbox.checked) {
                showAll.checked = false;
            }
            
            markers[layer].forEach(m => {
                if (checkbox.checked) {
                    map.addLayer(m);
                } else {
                    map.removeLayer(m);
                }
            });
            
            const allChecked = ['elementary', 'middle', 'community', 'swimming', 'luxury'].every(
                type => document.getElementById(`filter-${type}`).checked
            );
            
            showAll.checked = allChecked;
        }
        
        function toggleAllLayers(checkbox) {
            if (typeof L === 'undefined' || !map) return;
            
            const types = ['elementary', 'middle', 'community', 'swimming', 'luxury'];
            
            types.forEach(type => {
                const typeCheckbox = document.getElementById(`filter-${type}`);
                typeCheckbox.checked = checkbox.checked;
                
                markers[type].forEach(m => {
                    if (checkbox.checked) {
                        map.addLayer(m);
                    } else {
                        map.removeLayer(m);
                    }
                });
            });
        }
        
        // Weight management with extended factors
        let weights = {
            academic: 50,
            stem: 50,
            arts: 50,
            gamedesign: 50,
            community: 50,
            swimming: 50,
            safety: 50,
            luxury: 50,
            cost: 50,
            international: 50,
            beach: 50,
            traffic: 50
        };
        
        function updateWeights() {
            Object.keys(weights).forEach(key => {
                weights[key] = parseInt(document.getElementById(`${key}-weight`).value);
                document.getElementById(`${key}-value`).textContent = weights[key] + '%';
            });
            updateRankings();
        }
        
        function setPreset(preset) {
            const presets = {
                academic: { academic: 90, stem: 80, arts: 70, gamedesign: 50, community: 40, swimming: 50, safety: 80, luxury: 60, cost: 60, international: 50, beach: 40, traffic: 60 },
                community: { academic: 60, stem: 60, arts: 50, gamedesign: 50, community: 100, swimming: 60, safety: 70, luxury: 50, cost: 50, international: 70, beach: 50, traffic: 70 },
                swimming: { academic: 70, stem: 60, arts: 50, gamedesign: 40, community: 50, swimming: 100, safety: 70, luxury: 50, cost: 50, international: 40, beach: 60, traffic: 70 },
                gamedesign: { academic: 70, stem: 80, arts: 60, gamedesign: 100, community: 50, swimming: 40, safety: 60, luxury: 40, cost: 50, international: 60, beach: 30, traffic: 70 },
                international: { academic: 80, stem: 70, arts: 70, gamedesign: 60, community: 80, swimming: 60, safety: 70, luxury: 80, cost: 50, international: 100, beach: 70, traffic: 50 },
                balanced: { academic: 70, stem: 70, arts: 60, gamedesign: 60, community: 70, swimming: 60, safety: 80, luxury: 60, cost: 70, international: 60, beach: 60, traffic: 70 }
            };
            
            const selectedPreset = presets[preset];
            Object.keys(selectedPreset).forEach(key => {
                weights[key] = selectedPreset[key];
                document.getElementById(`${key}-weight`).value = selectedPreset[key];
                document.getElementById(`${key}-value`).textContent = selectedPreset[key] + '%';
            });
            
            updateRankings();
        }
        
        function calculateScore(location) {
            let totalScore = 0;
            let totalWeight = 0;
            
            Object.keys(weights).forEach(key => {
                totalScore += (location.scores[key] * weights[key]);
                totalWeight += weights[key];
            });
            
            return totalWeight > 0 ? Math.round(totalScore / totalWeight) : 0;
        }
        
        function updateRankings() {
            const rankings = Object.keys(locationData).map(key => ({
                key: key,
                ...locationData[key],
                totalScore: calculateScore(locationData[key])
            })).sort((a, b) => b.totalScore - a.totalScore);
            
            const rankingGrid = document.getElementById('rankingGrid');
            rankingGrid.innerHTML = '';
            
            rankings.forEach((location, index) => {
                const rankCard = document.createElement('div');
                rankCard.className = 'ranking-card';
                rankCard.onclick = () => selectLocation(location.key);
                
                const programHighlights = getProgramHighlights(location.key);
                const schoolAssignment = getSchoolAssignment(location.key);
                
                rankCard.innerHTML = `
                    <div class="rank-number">${index + 1}</div>
                    <div class="ranking-content">
                        <div class="ranking-title">${location.name}</div>
                        <div class="ranking-subtitle">${location.details.population} • ${location.details.safety} crime rate</div>
                        
                        <div class="score-bar">
                            <div class="score-fill" style="width: ${location.totalScore}%">${location.totalScore}%</div>
                        </div>
                        
                        <div style="background-color: #e3f2fd; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <strong style="color: #1976d2;">📚 School Assignment for Your Children:</strong>
                            ${schoolAssignment}
                        </div>
                        
                        <div class="score-details">
                            <div class="score-item">
                                <div class="score-item-label">Academic</div>
                                <div class="score-item-value">${location.scores.academic}%</div>
                            </div>
                            <div class="score-item">
                                <div class="score-item-label">Community</div>
                                <div class="score-item-value">${location.scores.community}%</div>
                            </div>
                            <div class="score-item">
                                <div class="score-item-label">International</div>
                                <div class="score-item-value">${location.scores.international}%</div>
                            </div>
                            <div class="score-item">
                                <div class="score-item-label">Safety</div>
                                <div class="score-item-value">${location.scores.safety}%</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px;">
                            <strong>Key Programs:</strong> ${programHighlights}<br>
                            <strong>Home Prices:</strong> ${location.details.homePrice}<br>
                            <strong>Commute:</strong> ${location.details.commute}
                        </div>
                    </div>
                `;
                
                rankingGrid.appendChild(rankCard);
            });
            
            // Update comparison table scores
            document.getElementById('weston-score').textContent = calculateScore(locationData.weston) + '%';
            document.getElementById('cooper-score').textContent = calculateScore(locationData.cooper) + '%';
            document.getElementById('davie-score').textContent = calculateScore(locationData.davie) + '%';
            document.getElementById('aventura-score').textContent = calculateScore(locationData.aventura) + '%';
            document.getElementById('nmb-score').textContent = calculateScore(locationData.nmb) + '%';
            document.getElementById('posnack-score').textContent = calculateScore(locationData.posnack) + '%';
            document.getElementById('heritage-score').textContent = calculateScore(locationData.heritage) + '%';
        }
        
        function getSchoolAssignment(key) {
            const assignments = {
                weston: `
                    <div style="margin-top: 10px;">
                        <div style="margin-bottom: 8px;">
                            <strong>👦 9-year-old:</strong> <span style="color: #2e7d32;">Everglades or Gator Run Elementary</span>
                        </div>
                        <div>
                            <strong>👦 13-year-old:</strong> <span style="color: #1976d2;">Falcon Cove or Tequesta Trace Middle</span>
                        </div>
                        <div style="margin-top: 8px; padding: 8px; background-color: #fff3cd; border-radius: 4px;">
                            ⚠️ <strong>Two different schools, same district (Broward)</strong>
                        </div>
                    </div>
                `,
                cooper: `
                    <div style="margin-top: 10px;">
                        <div style="margin-bottom: 8px;">
                            <strong>👦 9-year-old:</strong> <span style="color: #2e7d32;">Embassy Creek or Cooper City Elementary</span>
                        </div>
                        <div>
                            <strong>👦 13-year-old:</strong> <span style="color: #1976d2;">Pioneer Middle School</span>
                        </div>
                        <div style="margin-top: 8px; padding: 8px; background-color: #fff3cd; border-radius: 4px;">
                            ⚠️ <strong>Two different schools, same district (Broward)</strong>
                        </div>
                    </div>
                `,
                davie: `
                    <div style="margin-top: 10px;">
                        <div style="margin-bottom: 8px;">
                            <strong>👦 9-year-old:</strong> <span style="color: #2e7d32;">Fox Trail or Silver Ridge Elementary</span>
                        </div>
                        <div>
                            <strong>👦 13-year-old:</strong> <span style="color: #1976d2;">Indian Ridge or Nova Middle</span>
                        </div>
                        <div style="margin-top: 8px; padding: 8px; background-color: #fff3cd; border-radius: 4px;">
                            ⚠️ <strong>Two different schools, same district (Broward)</strong>
                        </div>
                    </div>
                `,
                aventura: `
                    <div style="margin-top: 10px;">
                        <div style="margin-bottom: 8px;">
                            <strong>👦 Both Children:</strong> <span style="color: #e91e63;">Aventura City of Excellence School (ACES)</span>
                        </div>
                        <div style="margin-top: 8px; padding: 8px; background-color: #d4edda; border-radius: 4px;">
                            ✅ <strong>SAME K-8 SCHOOL!</strong> One drop-off, unified schedule<br>
                            🌍 <strong>International community, Miami-Dade district</strong>
                        </div>
                    </div>
                `,
                nmb: `
                    <div style="margin-top: 10px;">
                        <div style="margin-bottom: 8px;">
                            <strong>Option 1:</strong> <span style="color: #e91e63;">Both at Scheck Hillel (K-12)</span><br>
                            <strong>Option 2:</strong> <span style="color: #2e7d32;">Ojus Elem</span> + <span style="color: #1976d2;">Highland Oaks Middle</span>
                        </div>
                        <div style="margin-top: 8px; padding: 8px; background-color: #d1ecf1; border-radius: 4px;">
                            🏖️ <strong>Beach proximity, Miami-Dade district</strong>
                        </div>
                    </div>
                `,
                posnack: `
                    <div style="margin-top: 10px;">
                        <div style="margin-bottom: 8px;">
                            <strong>👦 Both Children:</strong> <span style="color: #e91e63;">David Posnack Jewish Day School</span>
                        </div>
                        <div style="margin-top: 8px; padding: 8px; background-color: #d4edda; border-radius: 4px;">
                            ✅ <strong>SAME K-12 SCHOOL!</strong> Israeli culture focus<br>
                            🏠 <strong>Live in Davie (Broward County)</strong>
                        </div>
                    </div>
                `,
                heritage: `
                    <div style="margin-top: 10px;">
                        <div style="margin-bottom: 8px;">
                            <strong>👦 Both Children:</strong> <span style="color: #e91e63;">American Heritage School</span>
                        </div>
                        <div style="margin-top: 8px; padding: 8px; background-color: #d4edda; border-radius: 4px;">
                            ✅ <strong>SAME K-12 SCHOOL!</strong> Elite academics<br>
                            📍 <strong>Plantation location (Broward County)</strong>
                        </div>
                    </div>
                `
            };
            return assignments[key] || "";
        }
        
        function getProgramHighlights(key) {
            const highlights = {
                weston: "Robotics champions, Cambridge program, YMCA swimming",
                cooper: "STEAM with coding, Cyclones swim team, Cambridge",
                davie: "Near NSU workshops, JCC programs, game design access",
                aventura: "International community, beach proximity, urban lifestyle",
                nmb: "Beach access, Hillel school option, growing community",
                posnack: "Coding/Robotics/MakerSpace, Hebrew, Israeli culture",
                heritage: "130+ arts, pre-professional tracks, engineering"
            };
            return highlights[key] || "";
        }
        
        function selectLocation(key) {
            showSection('details');
        }
        
        function showSection(sectionId) {
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => section.classList.remove('active'));
            
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
            
            if (sectionId === 'map' && !map) {
                setTimeout(() => {
                    initMap();
                }, 500);
            }
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            updateDaysLeft();
            updateRankings();
        });
    </script>
</body>
</html>
